<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>㊗️何老师教师节快乐！！| 何召鹏老师的专属教师节网站</title>
<style>
  /* 基础 */
  * { box-sizing: border-box; }
  body {
    margin: 0;
    background: #ffe4f0;
    background-image:
      radial-gradient(#ffd1e1 1.5px, transparent 1.5px),
      radial-gradient(#ffdbe8 1.2px, transparent 1.2px);
    background-size: 22px 22px, 18px 18px;
    font-family: "微软雅黑", "Arial Rounded", "PingFang SC", sans-serif;
    overflow-x: hidden;
    color:#3a2a2a;
  }
  /* 装饰层 */
  .decor-layer { pointer-events:none; position:fixed; inset:0; z-index:0;}
  .particle { position:absolute; bottom:-60px; opacity:0.75; animation: floatUp linear infinite; font-size:20px;}
  .p1{left:10%; animation-duration:12s;}
  .p2{left:25%; animation-duration:14s;}
  .p3{left:50%; animation-duration:11s;}
  .p4{left:70%; animation-duration:13s;}
  .p5{left:85%; animation-duration:15s;}
  @keyframes floatUp { 0%{transform:translateY(0); opacity:0;} 10%{opacity:1;} 100%{transform:translateY(-100vh); opacity:0;} }

  /* 进度 */
  .progress {
    position: fixed; top: 14px; left: 14px; z-index: 2;
    background: #fff1f6; border: 2px dashed #ff9bb1;
    padding: 6px 14px; border-radius: 999px;
    font-weight: 700; color: #ff4d7e;
    box-shadow: 0 4px 10px rgba(255,150,170,.25);
  }

  /* 页面容器 */
  .wrap {
    position: relative; z-index: 1;
    min-height: 100vh; display:flex; justify-content:center; align-items:center;
    padding:40px 16px;
  }
  .card {
    width: min(900px, 95vw);
    border-radius: 24px;
    background: rgba(255,255,255,0.7);
    box-shadow: 0 10px 28px rgba(255,150,180,.25);
    padding: 30px 24px 40px;
    text-align:center;
    position:relative;
  }
  .sticker {
    position:absolute; top:-14px; right:-14px;
    background:#fff1f6; border:2px dashed #ff9bb1; border-radius:14px;
    padding:6px 10px; font-size:14px; color:#ff4d7e; transform:rotate(8deg);
  }

  /* 标题与图片 */
  .q-title {
    font-size: 26px; line-height: 1.6; margin-bottom: 24px;
    text-shadow:0 2px 8px rgba(255,150,170,.25);
  }
  .q-img {
    max-width:60%; margin:12px auto 24px; display:block;
    border-radius:16px; box-shadow:0 6px 16px rgba(0,0,0,.25);
  }

  /* 统一的选项按钮颜色 */
  .options { display:flex; flex-direction:column; gap:20px; align-items:center;}
  .btn, .btn.secondary {
    min-width:260px; padding:16px 20px; border:none;
    border-radius:20px; cursor:pointer;
    font-size:20px; font-weight:700; color:#5a1b2e;
    background: linear-gradient(135deg,#ff9a9e,#fad0c4); /* 统一配色 */
    box-shadow: 0 0 0 4px rgba(255,255,255,.6) inset,
                0 10px 20px rgba(255,100,150,.38);
    transition: transform .2s, filter .2s;
  }
  .btn:hover { transform:scale(1.05); filter:brightness(1.05);}

  /* 彩色文字工具类 */
  .rainbow { 
  background:linear-gradient(90deg,red,orange,yellow,green,blue,violet);
  -webkit-background-clip: text; /* 兼容 WebKit */
  background-clip: text;         /* 标准写法 */
  color: transparent;
  font-weight: 900;
   }
  .pink { color:#ff4d7e; font-weight:700; }
  .b { font-weight:900; }
  .blue { color:#0066cc; font-weight:700; }
  .gold { color:#d4af37; font-weight:700; }
  .green { color:#2aa144; font-weight:700; }

  /* 弹窗 */
  .modal-backdrop {
    position:fixed; inset:0; background:rgba(255,192,203,.4);
    display:none; justify-content:center; align-items:center; z-index:10;
    backdrop-filter:blur(2px);
  }
  .modal {
    width:min(760px,92vw); background:#fffdfd; border-radius:22px;
    box-shadow:0 16px 40px rgba(255,120,160,.35);
    padding:22px 18px; text-align:center; animation:pop .25s ease;
  }
  @keyframes pop {from{transform:scale(.9);opacity:.3} to{transform:scale(1);opacity:1}}
  .modal h3 { margin:0 0 10px; font-size:24px;}
  .modal p { margin:6px 0; font-size:18px; line-height:1.6;}
  .modal img { margin-top:10px; max-width:40%; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,.2); }
  .next-btn {
    margin-top:14px; padding:12px 28px;
    border:none; border-radius:20px; cursor:pointer;
    background:linear-gradient(135deg,#ff9a9e,#fad0c4);
    font-size:18px; font-weight:700; color:#5a1b2e;
  }
  .next-btn:hover{ transform:scale(1.05);}

  /* 屏切换 */
  .screen { display:none; }
  .screen.active { display:block; }

  /* 响应式细节 */
  @media(max-width:480px){
    .modal img{ max-width:75%; }
    .q-img{ max-width:85%; }
  }

  /* ====== 结算页（花里胡哨） ====== */
  .final-bg {
    position: fixed; inset: 0; z-index: 0; pointer-events: none;
    background:
      radial-gradient(ellipse at top left, rgba(255,219,238,.6), transparent 40%),
      radial-gradient(ellipse at bottom right, rgba(210,244,255,.6), transparent 40%);
    opacity: 0; transition: opacity .6s ease;
  }
  .final-bg.show { opacity: 1; }

  .result-card {
    width: min(980px, 96vw);
    border-radius: 28px;
    padding: 40px 28px 36px;
    position: relative;
    overflow: hidden;
    text-align: center;
    background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.9));
    box-shadow: 0 20px 60px rgba(255,110,150,.25);
  }
  .result-card .ribbon {
    position: absolute; top: 18px; left: -48px;
    transform: rotate(-12deg);
    background: linear-gradient(90deg,#ff9a9e,#fad0c4,#ffd1e1);
    color: #5a1b2e; font-weight: 900; letter-spacing: .1em;
    padding: 8px 80px; border-radius: 16px; box-shadow: 0 10px 20px rgba(255,140,170,.35);
  }
  .result-title {
    font-size: 40px; margin: 8px 0 6px; line-height: 1.2;
    text-shadow: 0 4px 16px rgba(255,100,150,.25);
  }
  .result-subtitle {
    font-size: 18px; opacity: .9; margin-bottom: 22px;
  }
  .score-badge {
    display: inline-flex; align-items: center; gap: 12px;
    border-radius: 999px; padding: 12px 20px; margin: 8px 0 18px;
    background: #fff1f6; color: #ff4d7e; font-weight: 900; font-size: 18px;
    border: 2px dashed #ff9bb1; box-shadow: 0 6px 16px rgba(255,150,180,.25);
  }
  .score-badge .big { font-size: 26px; }
  .honor {
    display: inline-block; padding: 10px 18px; border-radius: 14px;
    background: linear-gradient(135deg,#ffe58f,#ffd666,#ffc53d);
    color: #5a2b00; font-weight: 900; box-shadow: 0 10px 24px rgba(255,180,80,.35);
  }
  .honor.mid {
    background: linear-gradient(135deg,#d6f5ff,#b5e8ff,#8ed8ff);
    color: #003a6b;
    box-shadow: 0 10px 24px rgba(130,200,255,.35);
  }
  .honor.low {
    background: linear-gradient(135deg,#e6e6e6,#d9d9d9,#bfbfbf);
    color: #333; box-shadow: 0 10px 24px rgba(0,0,0,.12);
  }
  .result-grid {
    display: grid; grid-template-columns: 1.1fr .9fr; gap: 22px; align-items: center;
  }
  .result-illus {
    min-height: 280px; border-radius: 22px;
    background:
      radial-gradient(circle at 20% 20%, rgba(255,200,220,.65), transparent 40%),
      radial-gradient(circle at 80% 30%, rgba(200,230,255,.6), transparent 40%),
      radial-gradient(circle at 50% 80%, rgba(255,255,200,.6), transparent 40%);
    box-shadow: inset 0 0 0 8px rgba(255,255,255,.55), 0 10px 26px rgba(0,0,0,.12);
    display: flex; justify-content: center; align-items: center; font-size: 80px;
  }
  .result-desc {
    text-align: left; font-size: 18px; line-height: 1.8;
    padding: 6px 2px;
  }
  /* ——“荣誉称号”整体放大（比标题小两号左右）—— */
  #honorLine { font-size: 28px; line-height: 1.5; margin: 6px 0 12px; }
  #honorLine .honor{ font-size: 22px; padding: 12px 20px; border-radius:16px; }
  #honorText { font-size: 32px; }
  @media(max-width:920px){
    #honorLine{ font-size:24px; }
    #honorLine .honor{ font-size:20px; }
    #honorText{ font-size:28px; }
  }

  .result-actions { display: flex; gap: 12px; justify-content: center; margin-top: 18px; }
  .btn-ghost {
    padding: 12px 18px; border-radius: 999px; border: 2px dashed #ff9bb1; background: #fff; color: #ff4d7e; font-weight: 800; cursor: pointer;
  }
  .btn-ghost:hover { transform: translateY(-1px); }
  .disabled { opacity: .55; filter: grayscale(10%); cursor: not-allowed; }
  .confetti { position: fixed; inset: 0; pointer-events: none; z-index: 5; overflow: hidden; }
  .confetti i {
    position: absolute; top: -10vh; width: 10px; height: 14px; opacity: .85;
    animation: fall linear forwards; transform: rotate(12deg);
  }
  @keyframes fall {
    to { transform: translateY(120vh) rotate(360deg); }
  }
  @media(max-width: 920px){ .result-grid{ grid-template-columns: 1fr; } }


/* === 修改：45° 丝带、插图容器、PDF按钮（鹅黄色）、可爱文案色彩 === */
.result-card .ribbon{
    position: absolute;
    left: -42%;
    top: 28px;
    width: 185%;
    height: 46px;
    line-height: 46px;
    padding: 0;
    transform: rotate(-45deg);
    transform-origin: 0 0;
    border-radius: 0;
    text-align: center;
    background: linear-gradient(90deg,#ffd6e7,#fff7c2,#bae7ff);
    color: #5a1b2e;
    font-weight: 900;
    letter-spacing: .12em;
    box-shadow: 0 8px 16px rgba(0,0,0,.15);
    z-index: 1;
    pointer-events: none;
  }

.result-illus{
  display: flex; justify-content: center; align-items: center;
  min-height: 280px;
  background:
    radial-gradient(circle at 20% 20%, rgba(255,200,220,.35), transparent 40%),
    radial-gradient(circle at 80% 30%, rgba(200,230,255,.35), transparent 40%),
    radial-gradient(circle at 50% 80%, rgba(255,255,200,.35), transparent 40%);
}
.result-illus img{
  max-width: 92%; max-height: 92%;
  object-fit: contain; border-radius: 18px;
  box-shadow: 0 8px 22px rgba(0,0,0,.10);
}

.btn-pdf{
  position: absolute; right: 24px; bottom: 24px;
  padding: 12px 18px; border-radius: 999px;
  background: #fff7c2; color: #7a4b00; border: 2px solid #ffe58f;
  font-weight: 900; cursor: pointer;
  box-shadow: 0 6px 16px rgba(255,200,80,.35);
}
.btn-pdf:hover{ transform: translateY(-1px); }

.cute-pink{ color:#ff5c8a; font-weight:800; }
.cute-orange{ color:#ff9f1a; font-weight:800; }
.cute-blue{ color:#3f8cff; font-weight:800; }


/* === Ribbon precise positioning & full coverage (no uncovered corners) === */
.result-card { position: relative; overflow: hidden; }
.result-card .ribbon{
  position: absolute;
  left: -42%;
  top: 28px;
  width: 185%;
  height: 46px;
  line-height: 46px;
  padding: 0;
  transform: rotate(-45deg);
  transform-origin: 0 0;
  border-radius: 0;
  text-align: center;
  background: linear-gradient(90deg,#ffd6e7,#fff7c2,#bae7ff);
  color: #5a1b2e;
  font-weight: 900;
  letter-spacing: .12em;
  box-shadow: 0 8px 16px rgba(0,0,0,.15);
  z-index: 1;
  pointer-events: none;
}
@media (max-width: 920px){
  .result-card .ribbon{
    top: 24px;
    height: 40px;
    line-height: 40px;
    left: -50%;
    width: 200%;
  }
}
/* === 打印设置：结算页图片缩小一半 === */
@media print {
  /* 仅作用于结算页（id="result"） */
  #result img {
    width: 50% !important;
    height: auto !important;
    max-width: none !important; /* 避免已有 max-width 限制 */
  }
}
    /* === Intro 页隐藏进度条 === */
    #intro1.active ~ .progress,
    #intro2.active ~ .progress {
      display: none;
    }
    #progress {
  display: none;
}

</style>
</head>
<body>
<audio id="bgm" src="晴天(指弹吉他版).mp3" preload="auto" autoplay loop style="display:none" playsinline></audio>

<!-- 装饰 -->
<div class="decor-layer">
  <div class="particle p1">💖</div>
  <div class="particle p2">✨</div>
  <div class="particle p3">💗</div>
  <div class="particle p4">⭐</div>
  <div class="particle p5">🌸</div>
</div>

<div class="progress" id="progress">1 / 10</div>

<!-- ===== Intro 样式仅作用于本两页 ===== -->
<style>
  /* 让 intro section 拥有原来两个单页里的 body 背景与字体 */
  #intro1, #intro2{
    position: relative;
    min-height: 100vh;
    background-color:#ffe4f0;
    background-image:
      radial-gradient(#ffd1e1 1.5px, transparent 1.5px),
      radial-gradient(#ffdbe8 1.2px, transparent 1.2px);
    background-size: 22px 22px, 18px 18px;
    background-position: 0 0, 10px 8px;
    font-family:"微软雅黑","Arial Rounded","PingFang SC",system-ui,sans-serif;
    overflow:hidden; text-align:center;
  }
  /* --- 祝福页（83） --- */
  #intro1 .decor-layer{pointer-events:none;position:fixed;inset:0;overflow:hidden;z-index:0}
  #intro1 .decor-layer .particle{position:absolute;bottom:-60px;opacity:.75;filter:drop-shadow(0 2px 3px rgba(255,120,160,.25));animation:floatUp linear infinite;font-size:18px}
  #intro1 .p1{left:8%;animation-duration:12s;font-size:20px}
  #intro1 .p2{left:18%;animation-duration:14s;font-size:16px;animation-delay:1s}
  #intro1 .p3{left:28%;animation-duration:11s;font-size:22px;animation-delay:2s}
  #intro1 .p4{left:40%;animation-duration:13s;font-size:18px;animation-delay:3s}
  #intro1 .p5{left:52%;animation-duration:15s;font-size:16px;animation-delay:1.5s}
  #intro1 .p6{left:63%;animation-duration:12.5s;font-size:20px;animation-delay:.5s}
  #intro1 .p7{left:74%;animation-duration:13.5s;font-size:18px;animation-delay:2.2s}
  #intro1 .p8{left:86%;animation-duration:11.5s;font-size:22px;animation-delay:3.3s}
  @keyframes floatUp{0%{transform:translateY(0) translateX(0) rotate(0);opacity:0}10%{opacity:.8}50%{transform:translateY(-50vh) translateX(8px) rotate(15deg)}100%{transform:translateY(-100vh) translateX(-10px) rotate(-15deg);opacity:0}}
  #intro1 .container{position:relative;z-index:1;margin:60px auto 0;line-height:1.8;width:min(920px,92vw);padding:18px 12px 8px;border-radius:24px;background:rgba(255,255,255,.6);box-shadow:0 8px 24px rgba(255,150,180,.25), inset 0 0 0 2px rgba(255,240,246,.7);backdrop-filter:blur(2px)}
  #intro1 .main-text{font-size:22px;color:#333}
  #intro1 .highlight{font-weight:bold;color:#0a3a88;font-size:44px;text-shadow:0 2px 0 rgba(10,58,136,.08)}
  #intro1 .emoji-img{width:100px;vertical-align:middle;margin-left:8px;animation:breathe 3s ease-in-out infinite}
  #intro1 .rainbow{font-size:52px;font-weight:bold;display:inline-block;margin:2em 0;background:linear-gradient(90deg,red,orange,yellow,green,cyan,blue,violet);-webkit-background-clip:text;background-clip:text;color:transparent;animation:spin 6s linear,breathe 3s ease-in-out infinite 6s;text-shadow:0 4px 10px rgba(255,170,200,.25)}
  @keyframes spin{from{transform:rotate(0)}to{transform:rotate(1080deg)}}
  @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
  #intro1 .blessing{font-size:28px;margin:40px 0;animation:breathe 3s ease-in-out infinite;text-shadow:0 3px 8px rgba(255,150,170,.2)}
  #intro1 .signature{position:relative;z-index:1;text-align:right;margin-right:25px;margin-top:20px;font-size:20px;color:deeppink}
  #intro1 .ribbon{position:fixed;top:-20px;left:50%;transform:translateX(-50%);width:70vw;max-width:900px;height:80px;background:linear-gradient(90deg,#ffd1e1,#ffe7ef,#ffd1e1);opacity:.6;filter:blur(6px);border-bottom-left-radius:40px;border-bottom-right-radius:40px;z-index:0}
  #intro1 .clouds{position:fixed;bottom:-30px;left:50%;transform:translateX(-50%);width:90vw;max-width:1100px;height:120px;background:radial-gradient(closest-side,#fff8fc,transparent) 0 50%/35% 80% repeat-x;opacity:.8;filter:blur(4px);z-index:0}
  #intro1 .next-btn{position:fixed;right:20px;bottom:20px;padding:18px 42px;border:none;border-radius:35px;background:linear-gradient(135deg,#ff9a9e,#fad0c4);font-size:20px;cursor:pointer;color:#5a1b2e;z-index:2;box-shadow:0 0 0 4px rgba(255,255,255,.6) inset,0 10px 24px rgba(255,100,150,.38),0 0 16px rgba(255,140,170,.55);transition:.2s}
  #intro1 .next-btn:hover{transform:scale(1.08);filter:brightness(1.06);box-shadow:0 0 0 4px rgba(255,255,255,.75) inset,0 14px 30px rgba(255,100,150,.5),0 0 22px rgba(255,140,170,.75)}
  @media (max-width:420px){#intro1 .main-text{font-size:20px}#intro1 .highlight{font-size:36px}#intro1 .rainbow{font-size:42px}#intro1 .blessing{font-size:24px}#intro1 .emoji-img{width:84px}#intro1 .next-btn{padding:16px 34px;font-size:18px}}

  /* --- 开始页（84） --- */
  #intro2 .ribbon{position:fixed;top:-20px;left:50%;transform:translateX(-50%);width:70vw;max-width:900px;height:80px;background:linear-gradient(90deg,#ffd1e1,#ffe7ef,#ffd1e1);opacity:.6;filter:blur(6px);border-bottom-left-radius:40px;border-bottom-right-radius:40px;z-index:0}
  #intro2 .clouds{position:fixed;bottom:-30px;left:50%;transform:translateX(-50%);width:90vw;max-width:1100px;height:120px;background:radial-gradient(closest-side,#fff8fc,transparent) 0 50%/35% 80% repeat-x;opacity:.8;filter:blur(4px);z-index:0}
  #intro2 .decor-layer{pointer-events:none;position:fixed;inset:0;z-index:0}
  #intro2 .decor-layer .particle{position:absolute;bottom:-60px;opacity:.75;filter:drop-shadow(0 2px 3px rgba(255,120,160,.25));animation:floatUp linear infinite;font-size:18px}
  #intro2 .p1{left:10%;animation-duration:12s;font-size:20px}
  #intro2 .p2{left:22%;animation-duration:14s;font-size:16px;animation-delay:1s}
  #intro2 .p3{left:36%;animation-duration:11s;font-size:22px;animation-delay:2s}
  #intro2 .p4{left:48%;animation-duration:13s;font-size:18px;animation-delay:3s}
  #intro2 .p5{left:60%;animation-duration:15s;font-size:16px;animation-delay:1.5s}
  #intro2 .p6{left:72%;animation-duration:12.5s;font-size:20px;animation-delay:.5s}
  #intro2 .p7{left:82%;animation-duration:13.5s;font-size:18px;animation-delay:2.2s}
  #intro2 .p8{left:90%;animation-duration:11.5s;font-size:22px;animation-delay:3.3s}
  #intro2 .wrap{position:relative;z-index:1;min-height:100vh;display:flex;justify-content:center;align-items:center}
  #intro2 .card-block{display:flex;flex-direction:column;align-items:center;gap:20px}
  #intro2 .card{width:min(920px,92vw);border-radius:24px;background:rgba(255,255,255,.6);box-shadow:0 8px 24px rgba(255,150,180,.25), inset 0 0 0 2px rgba(255,240,246,.7);backdrop-filter:blur(2px);padding:30px 24px 40px;text-align:center;position:relative}
  #intro2 .sticker{position:absolute;top:-14px;right:-14px;background:#fff1f6;border:2px dashed #ff9bb1;border-radius:14px;padding:6px 10px;font-size:14px;color:#ff4d7e;transform:rotate(8deg);box-shadow:0 4px 10px rgba(255,150,170,.25)}
  #intro2 .title{font-size:28px;color:#3a2a2a;line-height:1.6;margin:0 0 10px;text-shadow:0 2px 8px rgba(255,150,170,.25)}
  #intro2 .badge{display:inline-block;padding:4px 14px;margin:0 6px;border-radius:999px;background:linear-gradient(135deg,#ffd1e1,#ffe7ef);font-size:34px;color:#7e3559}
  #intro2 .subtitle{font-size:20px;color:#5a3b4a;margin:8px 0 4px;animation:breathe 3s ease-in-out infinite}
  #intro2 .start-btn{display:inline-block;margin-top:16px;padding:18px 48px;border:none;border-radius:40px;background:linear-gradient(135deg,#ff9a9e,#fad0c4);color:#5a1b2e;font-size:22px;font-weight:700;cursor:pointer;box-shadow:0 0 0 4px rgba(255,255,255,.6) inset,0 10px 24px rgba(255,100,150,.38),0 0 16px rgba(255,140,170,.55);transition:transform .2s,box-shadow .2s,filter .2s}
  #intro2 .start-btn:hover{transform:scale(1.06);filter:brightness(1.06)}
  #intro2 .slide-out{animation:slideOutLeft .6s ease forwards}
  @keyframes slideOutLeft{to{transform:translateX(-18%);opacity:0;filter:blur(2px)}}
  #intro2 .cute-gif{width:220px;max-width:90vw;display:block;border-radius:18px;box-shadow:0 6px 18px rgba(0,0,0,.15)}
  @media (max-width:420px){#intro2 .title{font-size:24px}#intro2 .subtitle{font-size:18px}#intro2 .badge{font-size:28px}#intro2 .start-btn{font-size:20px;padding:16px 40px}#intro2 .cute-gif{width:180px}}
</style>

<!-- ===== 祝福页（原 83） ===== -->
<section id="intro1" class="screen">
  <div class="ribbon"></div>
  <div class="clouds"></div>
  <div class="decor-layer" aria-hidden="true">
    <div class="particle p1">💖</div><div class="particle p2">✨</div>
    <div class="particle p3">💗</div><div class="particle p4">⭐</div>
    <div class="particle p5">💖</div><div class="particle p6">✨</div>
    <div class="particle p7">💗</div><div class="particle p8">⭐</div>
  </div>

  <div class="container">
    <p style="font-size:14px; color:#555; margin:0 0 8px; text-align:center; opacity:0.8;">
        轻触以播放音乐 🎵
    </p>
    <div class="main-text">
      祝我们政经课讲得最最好，<br>
      对政治经济学理论理解得最深刻、<br>
      应用得最贴合现实，<br>
      长得最最好看的<br>
      <span class="highlight">经院男神</span>
      <img src="节日快乐.gif" class="emoji-img" alt="emoji">
    </div>
    <div class="rainbow">何召鹏老师</div>
    <div class="blessing">🎆 教师节快乐！🎆</div>
</div>

  <div class="signature">by 何老师的忠实铁粉小何同学</div>

  <!-- 下一页：本地切换到 intro2，不依赖 showSection -->
  <button class="next-btn" onclick="
    document.getElementById('intro1').classList.remove('active');
    document.getElementById('intro2').classList.add('active');
  ">下一页 →</button>
</section>

<!-- ===== 开始页（原 84） ===== -->
<section id="intro2" class="screen">
  <div class="ribbon"></div>
  <div class="clouds"></div>
  <div class="decor-layer" aria-hidden="true">
    <div class="particle p1">💖</div><div class="particle p2">✨</div>
    <div class="particle p3">💗</div><div class="particle p4">⭐</div>
    <div class="particle p5">💖</div><div class="particle p6">✨</div>
    <div class="particle p7">💗</div><div class="particle p8">⭐</div>
  </div>

  <div class="wrap">
    <div class="card-block">
      <main class="card" id="card">
        <div class="sticker">开动啦 🎀</div>
        <h1 class="title">
          嘿嘿，现在来测测<br>
          谁才是真正最了解 <span class="badge">经院男神</span> 的超级学霸粉丝呢？ 🧐💖
        </h1>
        <p class="subtitle">
          下面这些题可不是谁都能答对的！答对越多，说明你越是真爱粉~~ ✨
        </p>

        <button class="start-btn" id="startBtn">开始答题 GoGoGo 🎉</button>
      </main>

      <img src="线条小狗.gif" alt="cute dog gif" class="cute-gif">

    </div>
  </div>

  <!-- 按你原样保留的音频元素 -->
  <audio id="bgAudio" preload="auto" src="go_go_go.mp3"></audio>
  <input id="filePicker" type="file" accept="audio/*" hidden />

  <script>
    // 保留你的原始播放逻辑；把“跳转下一页”替换为切到 Q1
    (function(){
      const btn = document.getElementById('startBtn');
      const audioEl = document.getElementById('bgAudio');
      const picker = document.getElementById('filePicker');

      async function tryPlayAudio(){
        try{ await audioEl.play(); return true; }
        catch(e){ try{ picker.click(); }catch(_){} return false; }
      }

      picker.addEventListener('change', async (e)=>{
        const f = e.target.files && e.target.files[0];
        if(f){ const url = URL.createObjectURL(f); audioEl.src = url; try{ await audioEl.play(); }catch{} }
      });

      btn.addEventListener('click', async ()=>{
        btn.disabled = true;
        btn.textContent = "播放中… 准备出发 🚀";
        await tryPlayAudio();
        setTimeout(()=>{
          // 用 intro2 自己做 slide-out 动画
          document.querySelector('#intro2 .wrap')?.classList.add('slide-out');
          setTimeout(()=>{
            // 切到 Q1：优先用你现有的 showSection(1)
            if(typeof showSection === 'function'){ showSection(1); }
            else{
              // 兜底：直接切换 active
              document.getElementById('intro2').classList.remove('active');
              document.getElementById('q1')?.classList.add('active');
            }
          }, 620);
        }, 3000);
      });
    })();
  </script>
</section>

<!-- 初始进入：把任何已激活的 .screen 切到 intro1（不改你原文件） -->
<script>
  (function(){
    const s = document.querySelectorAll('.screen.active');
    s.forEach(el=>{el.classList.remove('active');});
    const i1 = document.getElementById('intro1');
    if(i1) i1.classList.add('active');
  })();
</script>

  
</section>
<!-- Q1 -->
<section id="q1" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第1题 🎀</div>
      <h2 class="q-title">谁是世界上讲课最厉害、在同学们当中最受欢迎的政治经济学老师？</h2>
      <div class="options">
        <button class="btn" onclick="showCorrect(1)">A. 何召鹏老师</button>
        <button class="btn secondary" onclick="showWrong(1)">B. Daron Acemoglu</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q1_modalCorrect">
    <div class="modal">
      <h3>🎉 Bingo~答对啦，你真棒！ 🎉</h3>
      <p>是的没错就是 <span class="rainbow">何老师</span>！！</p>
      <p>何召鹏老师可是来自种菜大的，公认 <span class="pink">超极受欢迎的</span> 政经老师，</p>
      <p>每年都有 <span class="b">种菜</span><span class="b">全校</span> 的同学悄咪咪来蹭课听！！</p>
      <button class="next-btn" onclick="nextQ(1)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q1_modalWrong">
    <div class="modal">
      <h3>😅 哎呀～差一点点！</h3>
      <p>Daron Acemoglu 确实是享誉世界的经济学大佬，<br>代表作《Why Nations Fail》无人不知～</p>
      <p>但是在咱们政经课堂上，最受欢迎的老师绝对是 <span class="b">何召鹏老师</span>！</p>
      <p>不仅讲课思路清晰，逻辑完美，还自带“男神光环”，同学们听得津津有味！</p>
      <button class="next-btn" onclick="nextQ(1)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q1_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q1_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q2 -->
<section id="q2" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第2题 🎀</div>
      <h2 class="q-title">谁是世界上长得最好看的大帅哥政治经济学老师？</h2>
      <div class="options">
        <button class="btn" onclick="showWrong(2)">A. Dani Rodrik</button>
        <button class="btn" onclick="showCorrect(2)">B. 何召鹏老师</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q2_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦</span>，你真棒！ 🎉</h3>
      <p>💖 <span class="rainbow">何召鹏老师</span> 可是公认的 <span class="gold">大帅哥男神</span>！💖</p>
      <p>🌟 据本站制作者爆料，<br><span class="blue">何老师</span> 曾经在讲座上被夸帅哦~ ✨</p>
      <p>📸 截图为证，嘿嘿嘿：</p>
      <img src="被夸帅了o.jpg" alt="被夸帅截图" />
      <br />
      <button class="next-btn" onclick="nextQ(2)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q2_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀～差一点点！</span></h3>
      <p>📖 Dani Rodrik 老师可是 <span class="blue">哈佛大学</span> 的知名学者，论文满满都是 <span class="gold">大咖风范</span> ✨</p>
      <p>但要说 <b>长得最好看的大帅哥政治经济学老师</b>，那必须是 <span class="rainbow">何召鹏老师</span>！🌈</p>
      <p>他不仅讲课一绝，还自带「男神光环」💫～</p>
      <button class="next-btn" onclick="nextQ(2)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q2_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q2_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q3 -->
<section id="q3" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第3题 🎀</div>
      <h2 class="q-title">何老师最喜欢的食物是？</h2>
      <div class="options">
        <button class="btn" onclick="showCorrect(3)">A. 面条</button>
        <button class="btn" onclick="showWrong(3)">B. 米线</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q3_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦，你真棒！</span> 🎉</h3>
      <p>🍜 没错！<span class="pink">面条</span>可是 <span class="blue">何老师</span> 的最爱~</p>
      <p>在食堂里，<span class="blue">何老师</span> 经常吃面条的呢！😋</p>
      <button class="next-btn" onclick="nextQ(3)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q3_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀～差一点点！</span></h3>
      <p>🌶️🍲 米线当然也很好吃啦，</p>
      <p>但 <span class="rainbow">何老师的心头好</span> 其实是 <span class="pink">面条</span>！🍜</p>
      <p>还是 <span class="b">热腾腾的面条</span>，更得老师青睐 ✨</p>
      <button class="next-btn" onclick="nextQ(3)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q3_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q3_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q4 -->
<section id="q4" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第4题 🎀</div>
      <h2 class="q-title">何老师对什么过敏？</h2>
      <div class="options">
        <button class="btn" onclick="showCorrect(4)">A. 咖啡、花粉</button>
        <button class="btn" onclick="showWrong(4)">B. 小麦、花生</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q4_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦，你真棒！</span></h3>
      <p>据一位 <span class="blue">不愿透露姓名</span> 的热心爆料者透露：</p>
      <p>📌 <span class="b">大一</span> 某次聊天中，何老师提到自己对 <span class="pink">咖啡</span> 过敏；</p>
      <p>📌 <span class="b">大三</span> 时，同一位同学又听到何老师说：看起来疲惫，竟是 <span class="green">花粉</span> 惹的祸！🤧🌼</p>
      <p>结论：<span class="rainbow">咖啡 & 花粉</span> 就是正确答案～</p>
      <button class="next-btn" onclick="nextQ(4)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q4_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀~差一点点！</span></h3>
      <p>小麦、花生确实是常见的过敏原 🌰🥜，</p>
      <p>但就我们 <span class="blue">何老师</span> 而言，<b>真正的“过敏组合”</b>是：</p>
      <p>☕ <span class="pink">咖啡</span> + 🌼 <span class="green">花粉</span>！</p>
      <button class="next-btn" onclick="nextQ(4)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q4_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q4_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q5 -->
<section id="q5" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第5题 🎀</div>
      <h2 class="q-title">何老师最喜欢的西马学者是？</h2>
      <div class="options">
        <button class="btn" onclick="showCorrect(5)">A. 哈维</button>
        <button class="btn" onclick="showWrong(5)">B. 卢卡奇</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q5_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦！你真棒！</span> 🎉</h3>
      <p>📚 在课堂上，<span class="pink">哈维</span> 几乎是 <b>常驻嘉宾</b>，课均必提！</p>
      <p>🤓 而在读书会中，《资本的限度》到现在还没汇报完呢～</p>
      <p><span class="rainbow">所以毫无疑问：哈维 = 何老师的最爱西马学者！</span> 💖</p>
      <button class="next-btn" onclick="nextQ(5)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q5_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀~差一点点！</span></h3>
      <p>📖 卢卡奇当然也是西马的重要人物，<span class="blue">理论影响力</span> 不容小觑～</p>
      <p>但真正让 <span class="pink">何老师</span> <b>念念不忘</b> 的，还是 <span class="rainbow">哈维</span> 📚！</p>
      <p>✨ 无论课堂还是读书会，他都是频频登场的「心头好」！</p>
      <button class="next-btn" onclick="nextQ(5)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q5_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q5_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q6 -->
<section id="q6" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第6题 🎀</div>
      <h2 class="q-title">种菜大弹吉他信手拈来、唱歌也超级超级好听的政治经济学老师是？</h2>
      <div class="options">
        <button class="btn" onclick="showWrong(6)">A. 周杰伦老师</button>
        <button class="btn" onclick="showCorrect(6)">B. 何召鹏老师</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q6_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦！你真棒！</span> 🎉</h3>
      <p>🎸 <span class="rainbow">何老师</span> 的吉他真的 <span class="b">超棒</span>！声线也好迷人～🎤</p>
      <p>本站制作者自认 <span class="blue">吉他小白</span>，练了好久节奏还老对不齐，
         （而且至今不会 <span class="gold">大横按</span> 😭），唱歌也总是跑调……</p>
      <p>可是 <span class="pink">何老师</span> 只要稍稍展露一小小下身手，立刻就把同学粉丝们迷得不要不要的 ✨💖</p>
      <button class="next-btn" onclick="nextQ(6)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q6_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀~差一点点！</span></h3>
      <p><span class="blue">Jay Chou</span>当然是乐坛传奇💿，不过他还没来 <span class="b">种菜大</span> 开设《政治经济学》课程喔～</p>
      <p>而我们真正的 <span class="rainbow">弹吉他·唱歌·讲政经三栖男神</span> 是：<span class="pink">何召鹏老师</span>！</p>
      <button class="next-btn" onclick="nextQ(6)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q6_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q6_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q7 -->
<section id="q7" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第7题 🎀</div>
      <h2 class="q-title">种菜大经院“毕加索”称号属于下列哪位老师，此称号来源于？</h2>
      <div class="options">
        <button class="btn" onclick="showWrong(7)">A. 何召鹏老师，由于课堂上经常手绘漫画被同学封为“毕加索”</button>
        <button class="btn" onclick="showCorrect(7)">B. 何召鹏老师，由于板书不拘一格，龙飞凤舞（但其实逻辑完全不乱）而得名</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q7_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦！你真棒！</span> 🎉</h3>
      <p>🎨 这个称号源自某次 <span class="b">政治经济学</span> 课堂：
         <span class="pink">何老师</span> 自封称号</p>
           <p>但是我们的板书📚 重点不在“字迹”，而在 <b>结构清晰、推理严谨</b>，让知识点一目了然、牢牢记住！</p>
      <p>📸 本站制作者有幸在某次《国际政治与经济》课堂上，拍到了 <b>迄今为止最整齐的板书</b>：</p>
      <img src="最整齐板书！！.jpg" alt="最整齐板书照片" />
      <br />
      <button class="next-btn" onclick="nextQ(7)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q7_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀~差一点点！</span></h3>
      <p>课堂上确实会有可爱的手绘小图，但“<span class="rainbow">毕加索</span>”称号的来源，其实是因为 <b>板书风格</b>：不拘一格、龙飞凤舞，
         可逻辑却 <span class="blue">清清楚楚</span>、层次分明！</p>
      <p>更贴切的选项是 <b>B</b> 哦～记住啦 ✨</p>
      <button class="next-btn" onclick="nextQ(7)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q7_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q7_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q8 -->
<section id="q8" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第8题 🎀</div>
      <h2 class="q-title">曾获人大“金球奖”、踢球踢得超级棒的老师是？</h2>
      <div class="options">
        <button class="btn" onclick="showCorrect(8)">A. 何召鹏老师</button>
        <button class="btn" onclick="showWrong(8)">B. Cristiano Ronaldo 老师</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q8_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦！你真棒！</span> 🎉</h3>
      <p>⚽ <span class="rainbow">何老师</span> 曾在人大被颁发过“<b>金球奖</b>”！</p>
      <p>这是他超绝不经意间透露的小秘密～✨</p>
      <p>可惜本站作者还没亲眼见过……😭</p>
      <p>以后要是有这个荣幸，我一定 <span class="blue">拿着相机咔咔抓拍</span> 📸！</p>
      <button class="next-btn" onclick="nextQ(8)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q8_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀～差一点点！</span></h3>
      <p>⚽ <span class="blue">Cristiano Ronaldo</span> 确实是世界足坛的超级巨星，金球奖收割机🏆</p>
      <p>但既<span class="gold">懂政经</span>又能拿下“<span class="gold">金球奖</span>”的男神</p>
        <p>必须是我们的 <span class="rainbow">何召鹏老师</span>！💖</p>
      <button class="next-btn" onclick="nextQ(8)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q8_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q8_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q9 -->
<section id="q9" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第9题 🎀</div>
      <h2 class="q-title">种菜哪位老师的哪节课程获得了同课异构课程思政教学竞赛一等奖？</h2>
      <div class="options">
        <button class="btn" onclick="showCorrect(9)">A. 何召鹏老师，《政治经济学》</button>
        <button class="btn" onclick="showWrong(9)">B. 何召鹏老师，《高级政治经济学》</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q9_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦！你真棒！</span> 🎉</h3>
      <p><span class="rainbow">没错！</span>获奖课程是 <b>《政治经济学》</b> ✨</p>
      <p><span class="blue">高级政经</span> 当然也很棒呀～</p>
      <p>不过这次拿下“同课异构课程思政教学竞赛一等奖”的，正是 <span class="pink">《政治经济学》</span> 哦！</p>
      <button class="next-btn" onclick="nextQ(9)">继续下一题 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q9_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀～差一点点！</span></h3>
      <p><b>《高级政治经济学》</b> 当然也很精彩，</p>
      <p>但真正获得 <span class="gold">竞赛一等奖</span> 的，</p>
      <p>是我们的 <span class="rainbow">《政治经济学》</span> 🎖️</p>
      <p>别小看基础课，它可是名副其实的“夺冠担当”！</p>
      <button class="next-btn" onclick="nextQ(9)">继续下一题 →</button>
    </div>
  </div>
  <audio id="q9_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q9_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>

<!-- Q10 -->
<section id="q10" class="screen">
  <div class="wrap">
    <main class="card">
      <div class="sticker">第10题 🎀</div>
      <h2 class="q-title">以下图片来自哪个场合？</h2>
      <img src="讲座照片.jpg" alt="讲座照片" class="q-img" />
      <div class="options">
        <button class="btn" onclick="showWrong(10)">A. 2024年10月某节政经课</button>
        <button class="btn" onclick="showCorrect(10)">B. 2023年10月30日14:00-15:30 何召鹏老师在人民大学的讲座~</button>
      </div>
    </main>
  </div>
  <div class="modal-backdrop" id="q10_modalCorrect">
    <div class="modal">
      <h3>🎉 <span class="pink">Bingo~答对啦！你真棒！</span> 🎉</h3>
      <p>嘿嘿～这张讲座照片虽然不是很高清 </p>
      <p>📸（且没有照出何老师的盛世美颜555）</p>
      <p>但是我发现它 <span class="blue">特别适合做表情包</span>！😏✨</p>
      <p>所以已经做成表情包啦 ↓</p>
      <img src="变表情包~.png" alt="表情包版" />
      <br />
      <button class="next-btn" onclick="goResult()">查看成绩 →</button>
    </div>
  </div>
  <div class="modal-backdrop" id="q10_modalWrong">
    <div class="modal">
      <h3>😅 <span class="pink">哎呀～差一点点！</span></h3>
      <p>这可不是课堂随手拍的，</p>
      <p>而是来自 <span class="pink">2023年10月30日14:00-15:30</span><br>
         <b>何召鹏老师在人民大学的讲座</b> 🎤✨</p>
      <button class="next-btn" onclick="goResult()">查看成绩 →</button>
    </div>
  </div>
  <audio id="q10_audioRight" src="答对了.mp3" preload="auto"></audio>
  <audio id="q10_audioWrong" src="答错.mp3" preload="auto"></audio>
</section>


<!-- 结果页（终版结算） -->
<section id="result" class="screen">
  <div class="final-bg" id="finalBg"></div>
  <div class="confetti" id="confetti"></div>
  <div class="wrap">
    <main class="result-card card-like">
      <div class="ribbon">为爱应援 · 教师节限定</div>
      <h2 class="result-title" id="resultTitle">——</h2>
      <div class="result-subtitle" id="resultSubtitle">——</div>

      <div class="score-badge" id="scoreBadge">
        <span>本次成绩：</span>
        <span class="big" id="scoreText">0 / 10</span>
      </div>

      <div class="result-grid">
        <div class="result-illus" id="resultEmoji"><img id="resultImg" alt="结果插图"/></div>
        <div class="result-desc">
          <p id="honorLine"><span class="honor">荣誉称号</span>：<b id="honorText">——</b></p>
          <p id="descText">——</p>
          <p id="tipsText" style="opacity:.9">——</p>
        </div>
      </div>

      <div class="result-actions">
        <button class="btn-pdf" onclick="window.print()">保存为PDF</button>
        <button class="next-btn" onclick="restart()">再玩一次</button>
      </div>
    </main>
  </div>
</section>



<script>

  // === BGM minimal control: autoplay on open; stop exactly when going to result; resume on restart ===
  function playBgm(){
    const a=document.getElementById('bgm'); if(!a) return;
    a.volume = 0.35;
    a.play && a.play().catch(()=>{});
  }
  function pauseBgm(){
    const a=document.getElementById('bgm'); if(!a) return;
    try{ a.pause(); }catch(e){}
  }
  document.addEventListener('DOMContentLoaded', playBgm);
  // In case autoplay was blocked by policy, start on first gesture
  document.addEventListener('click', playBgm, {once:true});
  document.addEventListener('keydown', playBgm, {once:true});


  // ====== 评分与流程状态 ======
  const TOTAL_Q = 10;
  let correctCount = 0;
  const answered = {};   // {1:true,...}
  const wrongList = [];  // 记录答错题号（首选）

  function setProgress(n){
    const p = document.getElementById('progress');
    if(p) p.textContent = n + ' / ' + TOTAL_Q + '  |  ✓' + correctCount;
  }

  // 显示某一题
  function showSection(n){
  // 先把所有页面隐藏
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));

  // 目标页面 ID
  const targetId = (n === 'result') ? 'result'
                 : (typeof n === 'number' ? 'q' + n : String(n));

  // 激活目标页面
  const target = document.getElementById(targetId);
  if (target) target.classList.add('active');

  // === 控制进度条显示/隐藏 ===
  const prog = document.getElementById('progress');
  if (n === 'result') {
    setProgress(TOTAL_Q);
    if (prog) prog.style.display = 'block';   // 结算页显示
  } else if (typeof n === 'number') {
    setProgress(n);
    if (prog) prog.style.display = 'block';   // Q1~Q10 显示
  } else {
    if (prog) prog.style.display = 'none';    // Intro1、Intro2 隐藏
  }

  // 保持原有逻辑
  closeAllModals();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}


  // 统一的答题弹窗控制 + 计分（只在首选时计分/记录）
  function markAnswered(n, isCorrect){
    if(!answered[n]){
      answered[n] = true;
      if(isCorrect){
        correctCount++;
      }else{
        wrongList.push(n);
      }
      // 禁用本题按钮，避免重复点击
      const box = document.querySelector('#q'+n+' .options');
      if(box){
        box.querySelectorAll('button').forEach(b => b.classList.add('disabled'));
        box.querySelectorAll('button').forEach(b => b.disabled = true);
      }
      // 进度条同步 ✓ 数
      const current = document.querySelector('.screen.active')?.id || 'q1';
      const idx = current.startsWith('q') ? Number(current.replace('q','')) : TOTAL_Q;
      setProgress(idx);
    }
  }

  function showCorrect(n){
    markAnswered(n, true);
    const a = document.getElementById('q'+n+'_audioRight');
    if(a){ a.currentTime = 0; a.play(); }
    const m = document.getElementById('q'+n+'_modalCorrect');
    if(m){ m.style.display='flex'; }
  }
  function showWrong(n){
    markAnswered(n, false);
    const a = document.getElementById('q'+n+'_audioWrong');
    if(a){ a.currentTime = 0; a.play(); }
    const m = document.getElementById('q'+n+'_modalWrong');
    if(m){ m.style.display='flex'; }
  }
  function nextQ(n){ showSection(n+1); }

  // 结算页：根据 correctCount 渲染三档文案+动效
  function goResult(){
    pauseBgm();
    renderResult();
    showSection('result');
  }

  function renderResult(){
    const titleEl = document.getElementById('resultTitle');
    const subEl = document.getElementById('resultSubtitle');
    const scoreText = document.getElementById('scoreText');
    const honorText = document.getElementById('honorText');
    const honorLine = document.getElementById('honorLine');
    const descEl = document.getElementById('descText');
    const tipsEl = document.getElementById('tipsText');
    const imgEl = document.getElementById('resultImg');
    const bg = document.getElementById('finalBg');

    scoreText.textContent = correctCount + ' / ' + TOTAL_Q;

    let tier = 'low'; // low / mid / high
    let honor = '超菜小菜鸟';
    let title = '通关完成！';
    let sub = '<span class="cute-blue">感谢陪伴</span>';
    let desc = '欸呀(；′⌒`)…今天的成绩有点菜，但别灰心！<span class="cute-orange">小草也能长成大树</span>～下次一定能逆袭！🌱✨';
    let tips = '小贴士：多留意课堂名场面、讲座花絮和“彩蛋”，传说中的加分点全在细节里～';
    let imgUrl = '铜奖！.png';

    if(correctCount >= 8){ // 8~10 忠实真爱粉
      tier = 'high'; honor = '忠实真爱粉';
      title = '满屏锦鲤降临！';
      sub = '哇哦 <span class="cute-pink">٩(๑>◡<๑)۶</span> 你就是老师的 <span class="cute-orange">超级应援王</span> ✨！';
      desc = '从课堂到讲座、从板书到球场，你的回答精准又自信～此刻的你，配得上<span class="cute-orange">金色桂冠</span>！💐';
      tips = '没人比你更懂我们的 <span class="cute-pink">经院男神</span>啦 ！！';
      imgUrl = '金奖！.png';
    }else if(correctCount >= 5){ // 5~7 一般般路人粉
      tier = 'mid'; honor = '一般般路人粉';
      title = '差一点就封神！';
      sub = '嘿嘿(｡･ω･｡)ﾉ♡～你对老师还<span class="cute-blue">蛮了解</span>的嘛！';
      desc = '基础盘很稳，再补两题就能升级成<span class="cute-pink">真爱粉</span>啦～加油鸭🐥！';
      tips = '建议：关注“爱吃面条”“板书风格”“读书会常客”等关键词，都是高概率命题区～';
      imgUrl = '银奖！.png';
    }

    // 渲染文案（使用 innerHTML 以支持彩色字与表情）
    titleEl.textContent = title;
    subEl.innerHTML = sub;
    honorText.textContent = honor;
    honorLine.querySelector('.honor').className = 'honor ' + (tier==='mid'?'mid':(tier==='low'?'low':''));
    descEl.innerHTML = desc;
    tipsEl.innerHTML = tips;

    // 设置结果插图
    if(imgEl){ imgEl.src = imgUrl; imgEl.alt = honor; }

    // 背景与彩带
    if(bg){ bg.classList.add('show'); }
    launchConfetti(tier);
  }

  // 简易彩带（纯JS/CSS，无外部库）
  function launchConfetti(tier){
    const box = document.getElementById('confetti');
    if(!box) return;
    box.innerHTML = '';
    const colors = tier==='high'
      ? ['#ff4d7e','#ffd666','#95de64','#69c0ff','#b37feb']
      : (tier==='mid' ? ['#69c0ff','#ffd666','#b37feb','#ff85c0'] : ['#d9d9d9','#bfbfbf','#ffc0cb']);
    const pieces = 80;
    for(let i=0;i<pieces;i++){
      const el = document.createElement('i');
      const c = colors[i % colors.length];
      el.style.background = c;
      el.style.left = Math.random()*100 + 'vw';
      el.style.opacity = 0.85;
      el.style.width = 8 + Math.random()*8 + 'px';
      el.style.height = 10 + Math.random()*12 + 'px';
      el.style.animationDuration = (6 + Math.random()*4) + 's';
      el.style.animationDelay = (Math.random()*0.8) + 's';
      el.style.transform = 'rotate(' + (Math.random()*360) + 'deg)';
      box.appendChild(el);
    }
  }

  // 重开
  function restart(){
  // 清理状态
  correctCount = 0;
  for(let i=1;i<=TOTAL_Q;i++){ answered[i] = false; }
  wrongList.length = 0;

  // 解除按钮禁用
  for(let i=1;i<=TOTAL_Q;i++){
    const box = document.querySelector('#q'+i+' .options');
    if(box){
      box.querySelectorAll('button').forEach(b => { 
        b.disabled = false; 
        b.classList.remove('disabled'); 
      });
    }
  }

  // 关闭结算动效
  const bg = document.getElementById('finalBg');
  if(bg) bg.classList.remove('show');
  const conf = document.getElementById('confetti');
  if(conf) conf.innerHTML = '';

  showSection(1);

  // ===== 关键修改：确保音乐恢复 =====
  const bgm = document.getElementById('bgm');
  if(bgm){
    bgm.currentTime = 0;   // 从头播放
    bgm.play().catch(()=>{}); // 强制启动播放
  }
}


  function closeAllModals(){
    const list = document.querySelectorAll('.modal-backdrop');
    list.forEach(x => x.style.display='none');
  }

  // 点击遮罩关闭弹窗（可选）
  document.addEventListener('click', function(e){
    if(e.target.classList.contains('modal-backdrop')){
      e.target.style.display='none';
    }
  });

</script>

</body>
</html>
